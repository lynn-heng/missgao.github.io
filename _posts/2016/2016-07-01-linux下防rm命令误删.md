---
Title: linux下防rm命令误删
date: 2016-07-01
category: linux
tags: linux
slug: 2016-prevent-rm-mistakenly-deleted
---

前几天在自己的机器上一时手误在一个工作目录*rm -f \**了一下，执行完就感觉不对，有种双11想剁手的冲动。好在这个工作目录中的文件不多，前段时间给其它人都分别发过，在邮件的附件中一个个找回了。但报着不怕出问题，但问题不能重复出的态度，决定找一个方法来避免以后的误犯。  
一通GOOGLE后发现了一个方案：使用创建一个-i文件的方法

```bash
touch -- -i
```

该方案可以防止在-i文件所在目录下执行*rm -rf \**,因为在此\*会被shell扩展为当前目录下的文件，而*-i*是rm参数（强制提醒），这时就不会直接将文件删掉了，当然也可以将rm给建个*rm -i*的别名（RHEL就是这么干的），但在自己的电脑上还是不时需要删除多个文件的，加完后自己操作不便，所以使用touch的方法还是很不错的。但该方法不能处理如下的情况：

```bash
rm -rf ./*
rm -rf /path/*
```

因为这时SHELL扩展出来的*-i*前面带有路径，已经不能被解析为参数了。  
还有一个习惯要以后注意养成，就是将*-f*或*-rf*的参数放在rm命令的最后边，这样防止有时路径未输入完整时按了enter（话说我也曾有过这种经历）  
先将平常自己经常用的目录中建起-i文件来，虽然有个-i文件对强迫症来说看着不太爽，但能防误rm我忍了。
